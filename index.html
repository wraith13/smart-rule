<!DOCTYPE html>
<!--
    This file is genereted by build.js. „Åì„ÅÆ„Éï„Ç°„Ç§„É´„ÅØ build.js „Å´„Çà„Å£„Å¶ÁîüÊàê„Åï„Çå„Åæ„Åó„Åü„ÄÇ
    build options: ../build.json all
    build at: Tue Jan 27 2026 06:38:49 GMT+0900 (Êó•Êú¨Ê®ôÊ∫ñÊôÇ)
    repository: https://github.com/wraith13/slide-rule/
-->
<!-- license:
Boost Software License - Version 1.0 - August 17th, 2003

Permission is hereby granted, free of charge, to any person or organization
obtaining a copy of the software and accompanying documentation covered by
this license (the "Software") to use, reproduce, display, distribute,
execute, and transmit the Software, and to prepare derivative works of the
Software, and to permit third-parties to whom the Software is furnished to
do so, all subject to the following:

The copyright notices in the Software and this entire statement, including
the above license grant, this restriction and the following disclaimer,
must be included in all copies of the Software, in whole or in part, and
all derivative works of the Software, unless such copies or derivative
works are solely in the form of machine-executable object code generated by
a source language processor.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.
-->
<html lang="en">
<head>
<meta charset="utf-8">
<title>Slide Rule</title>
<link id="favicon" rel="shortcut icon" href="./image/favicon.png">
<link rel="canonical" href="https://wraith13.github.io/slide-rule/">
<link rel="apple-touch-icon" href="./image/favicon.png">
<meta name="theme-color" content="black">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
<meta name="description" lang="ja" content="Slide Rule Web App">
<link id="manifest" rel="manifest" href="web.manifest.json" />
<meta name="apple-mobile-web-app-title" content="Slide Rule">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="mobile-web-app-capable" content="yes">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@wraith13">
<!-- meta name="twitter:creator" content="@wraith13" -->
<meta name="twitter:title" content="Slide Rule">
<meta name="twitter:description" lang="en" content="Slide Rule Web App">
<meta name="twitter:image" content="https://wraith13.github.io/slide-rule/image/twitter-card.png">
<meta property="og:title" content="Slide Rule" />
<meta property="og:description" content="Slide Rule Web App" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://wraith13.github.io/slide-rule/" />
<meta property="og:image" content="https://wraith13.github.io/slide-rule/image/twitter-card.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:site_name" content="Slide Rule" />
<meta property="og:locale" content="en_US" />
<link rel="image_src" href="https://wraith13.github.io/slide-rule/image/twitter-card.png" />
<style>
html, body, .view, .screen
{
    height: 100%;
    min-height: 100vh;
    min-height: 100lvh;
    max-height: 100vh;
    max-height: 100lvh;
    width: 100%;
    min-width: 100vw;
    min-width: 100lvw;
    max-width: 100vw;
    max-width: 100lvw;
}
html, body
{
    margin: 0px;
    padding: 0px;
    overflow: visible;
}
.view, .screen
{
    position: fixed;
    inset: 0px;
    image-rendering: pixelated;
}
body:not(.ruler-view) #ruler-view
{
    display: none;
}
body:not(.ruler-view) #ruler-view-icon
{
    display: none;
}
body:not(.grid-view) #grid-view
{
    display: none;
}
body:not(.grid-view) #grid-view-icon
{
    display: none;
}
body:not(.graph-view) #graph-view
{
    display: none;
}
body:not(.graph-view) #graph-view-icon
{
    display: none;
}
body:not(.logarithmic-scale) #logarithmic-scale-icon
{
    display: none;
}
body:not(.linear-scale) #linear-scale-icon
{
    display: none;
}
#ruler-view
{
    background-color: cadetblue;
}
#grid-view
{
    background-color: lightblue;
}
#graph-view
{
    background-color: beige;
}
#control-panel
{
    position: fixed;
    z-index: 100;
    bottom: 0.5rem;
    bottom: max(0.5rem, env(safe-area-inset-bottom, 0.5rem));
    right: 0.5rem;
    right: max(0.5rem, env(safe-area-inset-right, 0.5rem));
    color: white;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(0.5rem);
    padding: 0.25rem;
    border-radius: 2rem;
    display: flex;
    flex-direction: row;
    transition: opacity 0.5s ease;
}
button
{
    position: relative;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 50%;
    height: 3rem;
    width: 3rem;
    padding: calc(0.5rem - 4px);
    border-width: 4px;
    border-style: solid;
    border-color: black;
    transition: border-color 0.5s ease;
    color: white;
}
button svg
{
    position: relative;
    height: 2.0rem;
    width: 2.0rem;
    color: white;
    fill: white;
}
button svg path
{
    color: white !important;
    fill: white !important;
}
button.round-bar::before
{
    position: absolute;
    content: "";
    height: 3rem;
    width: 3rem;
    top: -4px;
    left: -4px;
    transition: --low 0.5s ease, --high 0.5s ease, --rotate 0.5s ease;
    border-radius: 50%;
    mask-image: radial-gradient(circle at center, transparent 0%, transparent calc(70.71% - 4px), white calc(70.71% - 4px));
    background:
        radial-gradient(circle at center, black 0%, black calc(70.71% - 4px), transparent calc(70.71% - 4px)), /* This radial-gradient is a fallback for older environments */
        conic-gradient(black 0deg, black calc(var(--low) * 360deg),  white calc(var(--low) * 360deg),  white calc(var(--high) * 360deg), white calc(var(--high) * 360deg), black calc(var(--high) * 360deg));
    transform: rotate(calc(var(--rotate) * 360deg));
}
button.on
{
    border-color: white;
}
button:focus
{
    outline: none;
    background-color: hsla(200, 100%, 35%, 0.9);
}
@media (hover: hover)
{
    button:hover
    {
        background-color: hsla(100, 100%, 25%, 0.9);
    }
}

</style>
</head>
<body>
<noscript id="noscript" role="presentation">
    <div class="panel" role="presentation">
        <div class="section" role="presentation">
            <h2>NOSCRIPT</h2>
            JavaScript is disabled. Please enable JavaScript.
        </div>
    </div>
</noscript>
üöß UNDERCONSTRUCTION
<div id="ruler-view" class="view">
    RULER VIEW
    <svg id="ruler-svg" class="screen"></svg>
</div>
<div id="grid-view" class="view">GRID VIEW</div>
<div id="graph-view" class="view">GRAPH VIEW</div>
<div id="control-panel">
<button id="view-mode-button" class="round-bar">
<span id="ruler-view-icon">üìè</span>
<span id="grid-view-icon">üìã</span>
<span id="graph-view-icon">üìà</span>
</button>
<button id="scale-mode-button" class="round-bar">
<span id="logarithmic-scale-icon">‚àà</span>
<span id="linear-scale-icon">‚äø</span>
</button>
</div>
<script type="text/javascript">
const build = {
    at: "Tue Jan 27 2026 06:38:49 GMT+0900 (Êó•Êú¨Ê®ôÊ∫ñÊôÇ)",
    tick: 1769463529836
};
const evilCommonjsConfig = {
    "log": {
        "config": false,
        "load": false,
        "define": false,
        "readyToCapture": false,
        "results": false
    },
    "loadingTimeout": 500
}
; // "./resource/evil-commonjs.config.json"
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === "function" ? Iterator : Object).prototype);
    return g.next = verb(0), g["throw"] = verb(1), g["return"] = verb(2), typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var _this = this;
(function () {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
    var pathStack = [];
    pathStack.push(location.href);
    var getBasePath = function () { return location.href; };
    var getCurrentPath = function () { var _a; return (_a = pathStack[pathStack.length - 1]) !== null && _a !== void 0 ? _a : location.href; };
    var loadScript = function (src) { return __awaiter(_this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            return [2 /*return*/, new Promise(function (resolve, reject) {
                    var script = document.createElement("script");
                    script.src = src;
                    script.onload = function () { return resolve(); };
                    script.onerror = reject;
                    document.head.appendChild(script);
                })];
        });
    }); };
    var loadJsonRaw = function (src) { return __awaiter(_this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            return [2 /*return*/, new Promise(function (resolve, reject) {
                    var request = new XMLHttpRequest();
                    request.open('GET', src, true);
                    request.onreadystatechange = function () {
                        if (4 === request.readyState) {
                            if (200 <= request.status && request.status < 300) {
                                try {
                                    resolve(JSON.parse(request.responseText));
                                }
                                catch (err) {
                                    reject(err);
                                }
                            }
                            else {
                                reject(request);
                            }
                        }
                    };
                    request.send(null);
                })];
        });
    }); };
    var makeAbsoluteUrl = function (path) {
        var mappedPath = resolveMapping(path);
        var base = mappedPath ? getBasePath() : getCurrentPath();
        var url = mappedPath !== null && mappedPath !== void 0 ? mappedPath : path;
        var baseParts = base.split("?")[0].split("/");
        if (4 <= baseParts.length && "" !== baseParts[baseParts.length - 1]) {
            // „Éï„Ç°„Ç§„É´ÂêçÈÉ®ÂàÜ„ÅÆÈô§Âéª
            baseParts = baseParts.slice(0, -1);
        }
        if (4 <= baseParts.length && "" === baseParts[baseParts.length - 1]) {
            // Êú´Â∞æ„ÅÆÁ©∫Ë¶ÅÁ¥†„ÇíÈô§Âéª(„Åó„Å¶„Åä„Åã„Å™„ÅÑ„Å®ÁµêÂêàÊôÇ„Å´‰ΩôÂàÜ„Å´ / „ÅåÊåü„Åæ„Çã)
            baseParts = baseParts.slice(0, -1);
        }
        var urlParts = url.split("/");
        if (0 <= urlParts[0].indexOf(":")) {
            //  Áµ∂ÂØæ„Éë„Çπ„Å™„ÅÆ„Åß base ÂÅ¥„ÅØÂÖ®„Å¶Á†¥Ê£Ñ
            baseParts = [];
        }
        else {
            if ("" === urlParts[0]) {
                urlParts = urlParts.slice(1);
                if ("" === urlParts[0]) {
                    //  „Éó„É≠„Éà„Ç≥„É´„Å†„ÅëÂà©Áî®
                    baseParts = baseParts.slice(0, 1);
                }
                else {
                    //  „Çµ„Éº„Éê„ÉºÂêç„Åæ„ÅßÂà©Áî®
                    baseParts = baseParts.slice(0, 3);
                }
            }
            else {
                while (true) {
                    if ("." === urlParts[0]) {
                        urlParts = urlParts.slice(1);
                        continue;
                    }
                    if (".." === urlParts[0]) {
                        urlParts = urlParts.slice(1);
                        if (4 <= baseParts.length) {
                            baseParts = baseParts.slice(0, -1);
                        }
                        continue;
                    }
                    break;
                }
            }
        }
        return baseParts.concat(urlParts).join("/");
    };
    var evil = {
        unresolved: [],
        modules: {},
        mapping: {},
        module: {
            registerMapping: function (path, mapping) { return mapping.forEach(function (i) { return evil.mapping[i] = path; }); },
            load: function (path, mapping) { return __awaiter(_this, void 0, void 0, function () {
                var absolutePath, result, _a, _b, absolutePath, result;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            if (!/\.json(\?.*)?$/i.test(path)) return [3 /*break*/, 2];
                            if (mapping) {
                                evil.module.registerMapping(path, mapping);
                            }
                            absolutePath = makeAbsoluteUrl(path);
                            if (config.log.load) {
                                console.log("evil-commonjs: load(\"".concat(absolutePath, "\", ").concat(JSON.stringify(mapping), ")"));
                            }
                            _a = evil.modules;
                            _b = absolutePath;
                            return [4 /*yield*/, loadJsonRaw(absolutePath)];
                        case 1:
                            result = _a[_b] = _c.sent();
                            window.module.pauseCapture();
                            return [2 /*return*/, result];
                        case 2:
                            absolutePath = makeAbsoluteUrl(path);
                            _c.label = 3;
                        case 3:
                            _c.trys.push([3, , 5, 6]);
                            pathStack.push(absolutePath);
                            window.module.readyToCapture(absolutePath);
                            if (config.log.load) {
                                console.log("evil-commonjs: load(\"".concat(absolutePath, "\", ").concat(JSON.stringify(mapping), ")"));
                            }
                            return [4 /*yield*/, loadScript(absolutePath)];
                        case 4:
                            _c.sent();
                            return [3 /*break*/, 6];
                        case 5:
                            pathStack.pop();
                            return [7 /*endfinally*/];
                        case 6:
                            result = evil.module.capture(path, mapping);
                            return [2 /*return*/, result];
                    }
                });
            }); },
            sequentialLoad: function (map) { return __awaiter(_this, void 0, void 0, function () {
                var result, _a, _b, _c, _i, i, _d, _e;
                return __generator(this, function (_f) {
                    switch (_f.label) {
                        case 0:
                            result = [];
                            _a = map;
                            _b = [];
                            for (_c in _a)
                                _b.push(_c);
                            _i = 0;
                            _f.label = 1;
                        case 1:
                            if (!(_i < _b.length)) return [3 /*break*/, 4];
                            _c = _b[_i];
                            if (!(_c in _a)) return [3 /*break*/, 3];
                            i = _c;
                            _e = (_d = result).push;
                            return [4 /*yield*/, evil.module.load(map[i].path, map[i].mapping)];
                        case 2:
                            _e.apply(_d, [_f.sent()]);
                            _f.label = 3;
                        case 3:
                            _i++;
                            return [3 /*break*/, 1];
                        case 4: return [2 /*return*/, result];
                    }
                });
            }); },
            capture: function (path, mapping) {
                if (mapping) {
                    evil.module.registerMapping(path, mapping);
                }
                var absolutePath = makeAbsoluteUrl(path);
                window.module.exports.default = window.module.exports.default || window.module.exports;
                var result = evil.modules[absolutePath] = window.module.exports;
                window.module.pauseCapture();
                evil.unresolved = evil.unresolved.filter(function (i) { return i !== absolutePath; });
                return result;
            },
            readyToCapture: function (path) {
                if (config.log.readyToCapture) {
                    console.log("readyToCapture(\"".concat(path, "\")"));
                }
                window.module.exports = window.exports = {};
                if (path) {
                    var absolutePath = makeAbsoluteUrl(path);
                    if (evil.modules[absolutePath]) {
                        window.module.exports = window.exports = evil.modules[absolutePath];
                    }
                }
            },
            pauseCapture: function () { return window.exports = undefined; },
            exports: {},
        },
    };
    var resolveMapping = function (path) {
        return evil.mapping[path];
    };
    //const gThis = globalThis;
    var gThis = ((_a = self !== null && self !== void 0 ? self : window) !== null && _a !== void 0 ? _a : global);
    try {
        evilCommonjsConfig;
    }
    catch (_l) {
        evilCommonjsConfig = undefined;
    }
    var config = {
        log: {
            config: true === ((_b = evilCommonjsConfig === null || evilCommonjsConfig === void 0 ? void 0 : evilCommonjsConfig.log) === null || _b === void 0 ? void 0 : _b.config),
            load: false !== ((_c = evilCommonjsConfig === null || evilCommonjsConfig === void 0 ? void 0 : evilCommonjsConfig.log) === null || _c === void 0 ? void 0 : _c.load),
            define: false !== ((_d = evilCommonjsConfig === null || evilCommonjsConfig === void 0 ? void 0 : evilCommonjsConfig.log) === null || _d === void 0 ? void 0 : _d.define),
            readyToCapture: false !== ((_e = evilCommonjsConfig === null || evilCommonjsConfig === void 0 ? void 0 : evilCommonjsConfig.log) === null || _e === void 0 ? void 0 : _e.readyToCapture),
            results: true === ((_f = evilCommonjsConfig === null || evilCommonjsConfig === void 0 ? void 0 : evilCommonjsConfig.log) === null || _f === void 0 ? void 0 : _f.results),
        },
        loadingTimeout: "number" === typeof (evilCommonjsConfig === null || evilCommonjsConfig === void 0 ? void 0 : evilCommonjsConfig.loadingTimeout) ? evilCommonjsConfig.loadingTimeout : 1500,
    };
    try {
        var urlConfig = (_k = (_j = (_h = (_g = location.href
            .split("#")[0]
            .split("?")[1]) === null || _g === void 0 ? void 0 : _g.split("&")) === null || _h === void 0 ? void 0 : _h.filter(function (i) { return i.startsWith("evil-commonjs="); })) === null || _j === void 0 ? void 0 : _j.map(function (i) { return JSON.parse(decodeURIComponent(i.substring("evil-commonjs=".length))); })) === null || _k === void 0 ? void 0 : _k[0];
        if (urlConfig) {
            if ("object" === typeof urlConfig) {
                if ("log" in urlConfig) {
                    if ("object" === typeof urlConfig["log"]) {
                        var urlConfigLog = urlConfig["log"];
                        if ("config" in urlConfigLog && "boolean" === typeof urlConfigLog["config"]) {
                            config.log.config = urlConfigLog["config"];
                        }
                        if ("load" in urlConfigLog && "boolean" === typeof urlConfigLog["load"]) {
                            config.log.load = urlConfigLog["load"];
                        }
                        if ("define" in urlConfigLog && "boolean" === typeof urlConfigLog["define"]) {
                            config.log.define = urlConfigLog["define"];
                        }
                        if ("results" in urlConfigLog && "boolean" === typeof urlConfigLog["results"]) {
                            config.log.results = urlConfigLog["results"];
                        }
                    }
                }
                if ("loadingTimeout" in urlConfig && "number" === typeof urlConfig["loadingTimeout"]) {
                    config.loadingTimeout = urlConfig["loadingTimeout"];
                }
            }
        }
    }
    catch (err) {
        console.error(err);
    }
    if (config.log.config) {
        console.log("evil-commonjs: evilCommonjsConfig: ".concat(JSON.stringify(config)));
    }
    gThis.require = function (path) {
        var _a;
        switch (path) {
            case "require":
                return window.require;
            case "exports":
                return evil.module.exports;
            default:
                var absolutePath = makeAbsoluteUrl(path);
                var result = (_a = evil.modules[absolutePath]) !== null && _a !== void 0 ? _a : evil.modules[path];
                if (!result) {
                    console.log("evil-commonjs: require(\"".concat(path, "\") -> \"").concat(absolutePath, "\""), getCurrentPath(), resolveMapping(path));
                    result = evil.modules[absolutePath] = {};
                    evil.unresolved.push(absolutePath);
                }
                return result;
        }
    };
    gThis.define = function (path, requires, content) {
        var absolutePath = makeAbsoluteUrl(path);
        if (evil.modules[absolutePath]) {
            if (config.log.define) {
                console.log("evil-commonjs: \"".concat(absolutePath, "\" is already defined!"));
            }
        }
        else {
            if (config.log.define) {
                console.log("evil-commonjs: define(\"".concat(absolutePath, "\", ").concat(JSON.stringify(requires), ", ...)"));
            }
            if (/\.json(\?.*)?$/i.test(path) || "function" !== typeof content) {
                return evil.modules[absolutePath] = content;
            }
            else {
                evil.module.readyToCapture(absolutePath);
                content.apply(null, requires.map(function (i) { return gThis.require(i); }));
                evil.module.capture(absolutePath);
            }
        }
    };
    setTimeout(function () {
        if (0 < evil.unresolved.length) {
            console.error("evil-commonjs: unresoled modules: ".concat(JSON.stringify(evil.unresolved)));
            // console.error(`"${path}" is not found! require() of evil-commonjs need to load() in advance.`);
            console.error("evil-commonjs: module mapping: ".concat(JSON.stringify(evil.mapping)));
            console.error("evil-commonjs: loaded modules: ".concat(JSON.stringify(Object.keys(evil.modules))));
            console.error(evil.modules);
        }
        else {
            if (config.log.results) {
                console.log("evil-commonjs: everything is OK!");
                console.log("evil-commonjs: module mapping: ".concat(JSON.stringify(evil.mapping)));
                console.log("evil-commonjs: loaded modules: ".concat(JSON.stringify(Object.keys(evil.modules))));
                console.log(evil.modules);
            }
        }
    }, config.loadingTimeout);
    window.module = evil.module;
})();
//# sourceMappingURL=evil-commonjs/index.js.map
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
define("script/url", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Url = void 0;
    //import config from "@resource/config.json";
    var Url;
    (function (Url) {
        Url.parseParameter = function (url) {
            var result = {};
            var urlObj = new URL(url.replace(/#/g, "?"));
            var params = urlObj.searchParams;
            params.forEach(function (value, key) { return result[key] = value; });
            return result;
        };
        Url.make = function () {
            var url = new URL(window.location.href.replace(/#/g, "?"));
            for (var _i = 0, _a = Object.entries(params); _i < _a.length; _i++) {
                var _b = _a[_i], key = _b[0], value = _b[1];
                url.searchParams.set(key, value);
            }
            return url.toString().replace(/\?/g, "#");
        };
        Url.addParameter = function (key, value) {
            params[key] = value;
            pushUrl();
            return params;
        };
        Url.get = function (key) {
            return params[key];
        };
        var pushUrl = function () {
            return window.history.replaceState({}, "", Url.make());
        };
        Url.initialize = function () {
        };
        var params = Url.parseParameter(window.location.href);
        Url.reloadParameters = function () {
            return params = Url.parseParameter(window.location.href);
        };
    })(Url || (exports.Url = Url = {}));
});
define("script/type", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Type = void 0;
    var Type;
    (function (Type) {
        Type.phi = (1 + Math.sqrt(5)) / 2;
        Type.getNamedNumberValue = function (value) {
            switch (value) {
                case "phi": return Type.phi;
                case "e": return Math.E;
                case "pi": return Math.PI;
                default: return value;
            }
        };
        Type.getNamedNumberLabel = function (value, locales, options) {
            switch (value) {
                case "phi": return "œÜ";
                case "e": return "e";
                case "pi": return "œÄ";
                default: return value.toLocaleString(locales, options);
            }
        };
        Type.getNext = function (list, current, isReverse) {
            var currentIndex = list.indexOf(current);
            if (0 <= currentIndex) {
                var nextIndex = (currentIndex + (isReverse ? -1 : 1) + list.length) % list.length;
                return list[nextIndex];
            }
            else {
                throw new Error("\uD83E\uDD8B FIXME: getNext: current value not found in list");
            }
        };
        Type.viewModeList = ["ruler", "grid", "graph"];
        Type.scaleModeList = ["logarithmic", "linear"];
    })(Type || (exports.Type = Type = {}));
});
define("script/ui", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.UI = void 0;
    var UI;
    (function (UI) {
        var getHtmlElementById = function (tag, id) {
            var element = document.getElementById(id);
            if (!element) {
                throw new Error("\uD83E\uDD8B FIXME: HtmlElement not found: ".concat(id));
            }
            if (tag !== element.tagName.toLowerCase()) {
                throw new Error("\uD83E\uDD8B FIXME: HtmlElement is not <".concat(tag, ">: ").concat(id));
            }
            return element;
        };
        var getSvgElementById = function (tag, id) {
            var element = document.getElementById(id);
            if (!element) {
                throw new Error("\uD83E\uDD8B FIXME: SvgElement not found: ".concat(id));
            }
            if (tag !== element.tagName.toLowerCase()) {
                throw new Error("\uD83E\uDD8B FIXME: SvgElement is not <".concat(tag, ">: ").concat(id));
            }
            return element;
        };
        UI.setAriaHidden = function (element, hidden) {
            var attributeKey = "aria-hidden";
            if (hidden) {
                var attribute = document.createAttribute(attributeKey);
                attribute.value = "true";
                element.attributes.setNamedItem(attribute);
            }
            else {
                if (element.attributes.getNamedItem(attributeKey)) {
                    element.attributes.removeNamedItem(attributeKey);
                }
            }
        };
        UI.setTextContent = function (element, text) {
            if (element.textContent !== text) {
                element.textContent = text;
                return true;
            }
            return false;
        };
        UI.setAttribute = function (element, name, value) {
            var _a;
            if (((_a = element.getAttribute(name)) !== null && _a !== void 0 ? _a : "") !== (value !== null && value !== void 0 ? value : "")) {
                if (undefined === value || null === value) {
                    element.removeAttribute(name);
                }
                else {
                    element.setAttribute(name, value);
                }
                return true;
            }
            return false;
        };
        UI.setStyle = function (element, name, value) {
            var _a;
            if (((_a = element.style.getPropertyValue(name)) !== null && _a !== void 0 ? _a : "") !== (value !== null && value !== void 0 ? value : "")) {
                if (undefined === value || null === value || "" === value) {
                    element.style.removeProperty(name);
                }
                else {
                    element.style.setProperty(name, value);
                }
                return true;
            }
            return false;
        };
        UI.updateRoundBar = function (button, properties) {
            // console.log("updateRoundBar", button, properties);
            /* For older environments where the 'initial-value' setting isn't supported, all values must be specified. */
            UI.setStyle(button, "--low", properties.low.toFixed(3));
            UI.setStyle(button, "--high", properties.high.toFixed(3));
            UI.setStyle(button, "--rotate", properties.rotate.toFixed(3));
        };
        UI.rulerView = getHtmlElementById("div", "ruler-view");
        UI.rulerSvg = getSvgElementById("svg", "ruler-svg");
        UI.gridView = getHtmlElementById("div", "grid-view");
        UI.graphView = getHtmlElementById("div", "graph-view");
        UI.controlPanel = getHtmlElementById("div", "control-panel");
        UI.viewModeButton = getHtmlElementById("button", "view-mode-button");
        UI.scaleModeButton = getHtmlElementById("button", "scale-mode-button");
        UI.initialize = function () {
            console.log("UI initialized");
        };
    })(UI || (exports.UI = UI = {}));
});
define("script/model", ["require", "exports", "script/type", "script/url"], function (require, exports, type_1, url_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Model = void 0;
    var Model;
    (function (Model) {
        Model.data = {
            lanes: [],
            anchor: 0
        };
        Model.getValueAt = function (lane, position, view) {
            switch (lane.type) {
                case "logarithmic":
                    if ("logarithmic" === view.scaleMode) {
                        var logScale = type_1.Type.getNamedNumberValue(lane.logScale);
                        var value = Math.pow(logScale, position / view.viewScale);
                        return lane.isInverted ? (logScale - value) : value;
                    }
                    else // linear
                     {
                        var value = position / view.viewScale;
                        return lane.isInverted ? (type_1.Type.getNamedNumberValue(lane.logScale) - value) : value;
                    }
                default:
                    throw new Error("\uD83E\uDD8B FIXME: getValueAt not implemented for lane type: ".concat(lane.type));
            }
        };
        Model.getPositionAt = function (lane, value, view) {
            switch (lane.type) {
                case "logarithmic":
                    if ("logarithmic" === view.scaleMode) {
                        var logScale = type_1.Type.getNamedNumberValue(lane.logScale);
                        var position = Math.log(value) / Math.log(logScale) * view.viewScale;
                        return lane.isInverted ? (Math.log(logScale - value) / Math.log(logScale) * view.viewScale) : position;
                    }
                    else // linear
                     {
                        var position = value * view.viewScale;
                        return lane.isInverted ? ((type_1.Type.getNamedNumberValue(lane.logScale) - value) * view.viewScale) : position;
                    }
                default:
                    throw new Error("\uD83E\uDD8B FIXME: getPositionAt not implemented for lane type: ".concat(lane.type));
            }
        };
        Model.initialize = function () {
            Model.data.anchor = Number(url_1.Url.get("anchor")) || 100;
            console.log("Model initialized: anchor=".concat(Model.data.anchor));
        };
    })(Model || (exports.Model = Model = {}));
});
define("script/number", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Number = void 0;
    var Number;
    (function (Number) {
        Number.parse = function (value) {
            if (undefined !== value) {
                var result = parseFloat(value);
                if (!isNaN(result)) {
                    return result;
                }
            }
            return undefined;
        };
        Number.orUndefined = function (value) {
            return "number" === typeof value ? value : undefined;
        };
    })(Number || (exports.Number = Number = {}));
});
define("resource/config", [], {
    "applicationTitle": "Slide Rule",
    "repositoryUrl": "https://github.com/wraith13/slide-rule/",
    "canonicalUrl": "https://wraith13.github.io/slide-rule/",
    "description": "Slide Rule Web App",
    "noscriptMessage": "JavaScript is disabled. Please enable JavaScript.",
    "model": {
        "lane": {
            "presets": {
                "A": {
                    "type": "logarithmic",
                    "isInverted": false,
                    "logScale": "2"
                },
                "B": {
                    "type": "logarithmic",
                    "isInverted": false,
                    "logScale": "2"
                },
                "C": {
                    "type": "logarithmic",
                    "isInverted": false,
                    "logScale": "1"
                },
                "D": {
                    "type": "logarithmic",
                    "logScale": "1"
                },
                "CI": {
                    "type": "logarithmic",
                    "isInverted": true,
                    "logScale": "1"
                },
                "DI": {
                    "type": "logarithmic",
                    "isInverted": true,
                    "logScale": "1"
                },
                "K": {
                    "type": "logarithmic",
                    "isInverted": false,
                    "logScale": "3"
                },
                "L": {
                    "type": "linear",
                    "isInverted": false,
                    "logScale": "e"
                },
                "S": {
                    "type": "sine",
                    "isInverted": false,
                    "logScale": "1"
                },
                "T": {
                    "type": "tangent",
                    "isInverted": false,
                    "logScale": "1"
                },
                "ST": {
                    "type": "small-tangent",
                    "isInverted": false,
                    "logScale": "1"
                },
                "P": {
                    "type": "power",
                    "isInverted": false,
                    "logScale": "2"
                },
                "LL": {
                    "type": "log-log",
                    "isInverted": false,
                    "logScale": "e"
                }
            }
        }
    },
    "view": {
        "defaultViewMode": "ruler",
        "defaultScaleMode": "logarithmic",
        "baseOfLogarithm": {
            "presets": ["phi", 2, "e", "pi", 10],
            "default": 10
        }
    }
});
define("script/view", ["require", "exports", "script/type", "script/number", "script/url", "script/ui", "resource/config"], function (require, exports, type_2, number_1, url_2, ui_1, config_json_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.View = void 0;
    config_json_1 = __importDefault(config_json_1);
    var View;
    (function (View) {
        View.data = {
            viewMode: "ruler",
            viewScale: 1,
            scaleMode: "logarithmic",
            baseOfLogarithm: 10,
        };
        View.getViewMode = function () { return View.data.viewMode; };
        View.isRulerView = function () { return View.data.viewMode === "ruler"; };
        View.isGridView = function () { return View.data.viewMode === "grid"; };
        View.isGraphView = function () { return View.data.viewMode === "graph"; };
        View.setViewMode = function (mode) {
            View.data.viewMode = mode;
            url_2.Url.addParameter("view-mode", mode);
            document.body.classList.toggle("ruler-view", View.isRulerView());
            document.body.classList.toggle("grid-view", View.isGridView());
            document.body.classList.toggle("graph-view", View.isGraphView());
            ui_1.UI.setAriaHidden(ui_1.UI.rulerView, !View.isRulerView());
            ui_1.UI.setAriaHidden(ui_1.UI.gridView, !View.isGridView());
        };
        View.getScaleMode = function () { return View.data.scaleMode; };
        View.isLogarithmicScale = function () { return View.data.scaleMode === "logarithmic"; };
        View.isLinearScale = function () { return View.data.scaleMode === "linear"; };
        View.setScaleMode = function (mode) {
            View.data.scaleMode = mode;
            url_2.Url.addParameter("scale-mode", mode);
            document.body.classList.toggle("logarithmic-scale", mode === "logarithmic");
            document.body.classList.toggle("linear-scale", mode === "linear");
        };
        View.initialize = function () {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
            View.setViewMode((_c = (_a = url_2.Url.get("view-mode")) !== null && _a !== void 0 ? _a : (_b = config_json_1.default.view) === null || _b === void 0 ? void 0 : _b.defaultViewMode) !== null && _c !== void 0 ? _c : "ruler");
            View.setScaleMode((_f = (_d = url_2.Url.get("scale-mode")) !== null && _d !== void 0 ? _d : (_e = config_json_1.default.view) === null || _e === void 0 ? void 0 : _e.defaultScaleMode) !== null && _f !== void 0 ? _f : "logarithmic");
            View.data.viewScale = (_g = number_1.Number.parse(url_2.Url.get("view-scale"))) !== null && _g !== void 0 ? _g : 1;
            View.data.baseOfLogarithm = (_l = (_h = number_1.Number.orUndefined(type_2.Type.getNamedNumberValue(url_2.Url.get("base")))) !== null && _h !== void 0 ? _h : (_k = (_j = config_json_1.default.view) === null || _j === void 0 ? void 0 : _j.baseOfLogarithm) === null || _k === void 0 ? void 0 : _k.default) !== null && _l !== void 0 ? _l : 10;
            console.log("View initialized: mode=".concat(View.data.viewMode, ", scale=").concat(View.data.viewScale, ", scaleMode=").concat(View.data.scaleMode, ", base=").concat(View.data.baseOfLogarithm));
        };
    })(View || (exports.View = View = {}));
});
define("script/render", ["require", "exports", "script/view", "script/model"], function (require, exports, view_1, model_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Render = void 0;
    var Render;
    (function (Render) {
        var dirty = false;
        var currentRenderer;
        Render.isDirty = function () {
            return false !== dirty;
        };
        Render.markDirty = function (laneIndex) {
            var isFirstDirty = !Render.isDirty();
            if (undefined !== laneIndex) {
                if (false === dirty) {
                    dirty = new Set();
                }
                if (dirty instanceof Set) {
                    dirty.add(laneIndex);
                }
            }
            else {
                dirty = true;
            }
            if (isFirstDirty) {
                requestAnimationFrame(function () {
                    currentRenderer(model_1.Model.data, view_1.View.data, dirty);
                    dirty = false;
                });
            }
        };
        Render.setRenderer = function (renderer) {
            return currentRenderer = renderer;
        };
    })(Render || (exports.Render = Render = {}));
});
define("script/ruler", ["require", "exports", "script/ui"], function (require, exports, ui_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Ruler = void 0;
    var Ruler;
    (function (Ruler) {
        Ruler.renderer = function (model, _view, _dirty) {
            Ruler.drawAnkorLine(model.anchor);
        };
        Ruler.drawAnkorLine = function (position) {
            var svg = ui_2.UI.rulerSvg;
            var line = svg.querySelector("line.ankor-line");
            ;
            if (!line) {
                line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.classList.add("ankor-line");
                svg.appendChild(line);
            }
            line.setAttribute("x1", "0");
            line.setAttribute("y1", position.toString());
            line.setAttribute("x2", svg.viewBox.baseVal.width.toString());
            line.setAttribute("y2", position.toString());
            var color = "red";
            line.setAttribute("stroke", color);
            line.setAttribute("stroke-width", "1");
        };
        Ruler.resize = function () {
            var svg = ui_2.UI.rulerSvg;
            document.body;
            svg.setAttribute("width", document.body.clientWidth.toString());
            svg.setAttribute("height", document.body.clientHeight.toString());
            svg.setAttribute("viewBox", "0 0 ".concat(document.body.clientWidth, " ").concat(document.body.clientHeight));
        };
        Ruler.initialize = function () {
            Ruler.resize();
        };
    })(Ruler || (exports.Ruler = Ruler = {}));
});
define("script/grid", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Grid = void 0;
    var Grid;
    (function (Grid) {
        Grid.renderer = function (_model, _view, _dirty) {
        };
    })(Grid || (exports.Grid = Grid = {}));
});
define("script/graph", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Graph = void 0;
    var Graph;
    (function (Graph) {
        Graph.renderer = function (_model, _view, _dirty) {
        };
    })(Graph || (exports.Graph = Graph = {}));
});
define("script/event", ["require", "exports", "script/type", "script/view", "script/ui", "script/render", "script/ruler", "script/grid", "script/graph"], function (require, exports, type_3, view_2, ui_3, render_1, ruler_1, grid_1, graph_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Event = void 0;
    var Event;
    (function (Event) {
        Event.updateViewModeRoundBar = function () { return ui_3.UI.updateRoundBar(ui_3.UI.viewModeButton, {
            low: 0 / type_3.Type.viewModeList.length,
            high: 1 / type_3.Type.viewModeList.length,
            rotate: type_3.Type.viewModeList.indexOf(view_2.View.getViewMode()) / type_3.Type.viewModeList.length,
        }); };
        Event.updateScaleModeRoundBar = function () { return ui_3.UI.updateRoundBar(ui_3.UI.scaleModeButton, {
            low: 0 / type_3.Type.scaleModeList.length,
            high: 1 / type_3.Type.scaleModeList.length,
            rotate: type_3.Type.scaleModeList.indexOf(view_2.View.getScaleMode()) / type_3.Type.scaleModeList.length,
        }); };
        Event.initialize = function () {
            console.log("Event initialized");
            window.addEventListener("resize", function () {
                ruler_1.Ruler.resize();
                render_1.Render.markDirty();
            });
            ui_3.UI.viewModeButton.addEventListener("click", function () {
                var current = view_2.View.getViewMode();
                var next = type_3.Type.getNext(type_3.Type.viewModeList, current);
                view_2.View.setViewMode(next);
                Event.updateViewModeRoundBar();
                switch (next) {
                    case "ruler":
                        render_1.Render.setRenderer(ruler_1.Ruler.renderer);
                        break;
                    case "grid":
                        render_1.Render.setRenderer(grid_1.Grid.renderer);
                        break;
                    case "graph":
                        render_1.Render.setRenderer(graph_1.Graph.renderer);
                        break;
                }
                render_1.Render.markDirty();
                console.log("View mode changed: ".concat(current, " -> ").concat(next));
            });
            ui_3.UI.scaleModeButton.addEventListener("click", function () {
                var current = view_2.View.getScaleMode();
                var next = type_3.Type.getNext(type_3.Type.scaleModeList, current);
                view_2.View.setScaleMode(next);
                Event.updateScaleModeRoundBar();
                render_1.Render.markDirty();
                console.log("Scale mode changed: ".concat(current, " -> ").concat(next));
            });
            Event.updateViewModeRoundBar();
            Event.updateScaleModeRoundBar();
        };
    })(Event || (exports.Event = Event = {}));
});
define("script/index", ["require", "exports", "script/url", "script/type", "script/ui", "script/model", "script/view", "script/event", "script/ruler", "script/render"], function (require, exports, url_3, type_4, ui_4, model_2, view_3, event_1, ruler_2, render_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    console.log("üöÄ Slide Rule build script");
    type_4.Type;
    url_3.Url.initialize();
    ui_4.UI.initialize();
    model_2.Model.initialize();
    view_3.View.initialize();
    event_1.Event.initialize();
    ruler_2.Ruler.initialize();
    render_2.Render.setRenderer(ruler_2.Ruler.renderer);
    render_2.Render.markDirty();
});
//# sourceMappingURL=script/index.js.map
// if ("serviceWorker" in navigator)
// {
//     window.addEventListener
//     (
//         "load",
//         () =>
//         {
//             navigator.serviceWorker.register("./sw.js")
//                 .then(reg => console.log("‚úÖ SW registered:", reg.scope))
//                 .catch(err => console.warn("üö´ SW registration failed:", err));
//     }
//     );
// }
</script>
</body>
</html>
